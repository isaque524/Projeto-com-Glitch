<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="./imagens/Video_game_controller_icon_designed_by_Maico_Amorim.svg.png" type="imagens/png">
    <title>Jogo da cobrinha</title>

    <script src="https://kit.fontawesome.com/723f0cb31d.js" crossorigin="anonymous"></script>

    <style>
        @font-face {
  font-family: "game";
  src: url("https://fonts.googleapis.com/css2?family=Poppins:wght@500;800&display=swap");
}
* {
  padding: 0;
  margin: 0;
  box-sizing: border-box;
}
button:focus {
  outline: 0;
}

html,
body {
  height: 100%;
  font-family: "Poppins", sans-serif;
  background-color:#2980b9;
 background-image:linear-gradient(87deg, #8e0e00 0%, #1f1c18 56%);
}
body {
  background-color: #22283c;
  display: flex;
  justify-content: center;
  align-items: center;
  color: #6e7888;
}

.noselect {
  user-select: none;
}
#replay {
  font-size: 10px;
  padding: 10px 20px;
  border: none;
  color: #222738;
  border-radius: 20px;
  font-weight: 800;
  background-color:#2980b9;
 background-image:linear-gradient(to right, #67b26f 0%, #4ca2cd 100%);
}
#replay:hover {
    background-image:linear-gradient(to right, #23074d 0%, #cc5333 100%);
    color: white;
  
}

#scr{
    display: flex;
  align-items: center;
  font-size: 10px;
  flex-flow: column;
  margin-left: 10px;
  color:#2980b9;
 transform:translatex(-3px) translatey(22px);
 min-height:41px;
 font-size:17px;
 line-height:24.3px;
 
}
    </style>
    
    <!-- fim do estilo começo do html -->

    <div class="container noselect">
        <div class="wrapper">
            <button id="replay">
                <i class="fas fa-play"></i>
                RESTART
            </button>
    
            <div id="scr">
                <h2>score</h2>
                <span id="score">00</span>
            </div>

        </div>
     </div>

</head>
<body>

 <canvas id="stage" width="600" height="600"></canvas>

 
    <!-- fim do html começo do script -->

    <script type="text/javascript">
        let dom_replay = document.querySelector("#replay");
        let dom_score = document.querySelector("#score");
        let snake,
        isGameOver = false,
        score = 1,
        maxScore = window.localStorage.getItem("maxScore") || undefined;
        
        window.onload = function (){
            var stage = document.getElementById('stage');
            var ctx = stage.getContext("2d");
            document.addEventListener("keydown",keyPush);

            setInterval(game, 60);

            

           /*  vel é a quantidade de casas que a cobra vai andar */
            const vel = 1;
            
            /* velocidade x e y */
            var vx = vy = 0;

            /* ponto x e y */
            var px = 10;
            var py = 15;

            /* tamanho dos quadrados */
            var tp = 30;

            /* quantidade de quadrados */
            var qp = 20;

            /* posição da maçã */
            var ax=ay=15
     
            /* corpo da cobra */
            var trail = [];
            tail = 5;

            function incrementScore() {
                score++;
                dom_score.innerText = score.toString().padStart(2, "0");
                                    }
 
            function game(){
                px += vx;
                py += vy;
                if (px <0) {
                    px = qp-1;
                }
                if (px > qp-1) {
                    px = 0;
                }
                if (py < 0) {
                    py = qp-1;
                }
                if (py > qp-1) {
                    py = 0;
                }
 
                ctx.fillStyle = "black";
                ctx.fillRect(0,0, stage.width, stage.height);
 
                ctx.fillStyle = "red";
                ctx.fillRect(ax*tp, ay*tp, tp,tp);
 
                ctx.fillStyle = "gray";
                for (var i = 0; i < trail.length; i++) {
                    ctx.fillRect(trail[i].x*tp, trail[i].y*tp, tp-1,tp-1);
                    if (trail[i].x == px && trail[i].y == py)
                    {
                    
                        clear() 

                        //game over
                    }
                }
 
                trail.push({x:px,y:py })
                while (trail.length > tail) {
                    trail.shift();
                }
 
                if (ax==px && ay==py){
                    tail++;
                    ax = Math.floor(Math.random()*qp);
                    ay = Math.floor(Math.random()*qp);
                    score2(score++);
                    console.log(score)
                    
                }
                
            }
            function keyPush(event){

                switch (event.keyCode){
                    case 37: //left
                        vx = -vel;
                        vy = 0;
                        break;
                     case 38: //up
                        vx = 0;
                        vy = -vel;
                        break;
                    case 39: //right
                        vx = vel;
                        vy = 0;
                        break;
                    case 40: //down
                        vx = 0;
                        vy = vel;
                         break;
                    default:

                    break

                }
            } 

function initialize() {
  dom_replay.addEventListener("click", clear, false);

}


function clear() {
    dom_score.innerText = "00";
    score = "1";
       vx = vy=0;
       px = 10;
       py = 15;
       ax=ay=15
      tail =5;
     }
function score2(score){
    let dom_score = document.querySelector("#score");
    dom_score.innerHTML=score;
    
}

initialize();
        }
    </script>
</body>
</html>